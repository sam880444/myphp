
<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width,initial-scale=1">
		<title>jQueryTemplate</title>		
	    <link rel="stylesheet" href="css/jquery.mobile-1.4.5.min.css">
	</head>
	<body>
<div data-role="page" id="page1">
    	   <header data-role="header" 
    	           data-position="fixed"
    	           data-add-back-btn="true"
    	           data-back-btn-text="返回">
    	   	<h1>ListView Demo</h1>
    	   </header>
    	   <div role="main" class="ui-content">
    	   	
    	   	 <ul data-role="listview" data-inset="true" data-filter="true">
    	   	 	
    	   	 </ul>
    	   	  
    	  
    	   </div>
    	   <footer data-role="footer" data-position="fixed" data-fullscreen="true">
    	   	<h4>&copy;IIIEDU</h4>
    	   </footer>
    </div>


    <script src="script/jquery-2.1.4.min.js"></script>
    <script src="script/jquery.mobile-1.4.5.min.js"></script>
    <script>
        //document.ready事件
    		$(function(){
    			//程式碼寫在這裡
    			$.getJSON('GetAllProducts_PDO.php',{},function(datas){
    				$.each(datas,function(i,product){
    					//console.log(product.ModelName);
    					//console.log(product.UnitCost);
    					//console.log(product.ProductImage);
    					var img = $('<img />').attr('src','ProductImages/' + product.ProductImage);
    					var p = $('<p></p>').text("特價:" + product.UnitCost);
    					var h2 = $('<h2></h2>').text(product.ModelName);
    					var a = $('<a></a>').attr('href','#')
    					            .append([img,h2,p]);
    					var li = $('<li></li>').append(a);
    					
    					$('ul[data-role="listview"]').append(li);
    				});
    				
    				$('ul[data-role="listview"]').listview('refresh');//最重要 讓他重新更新畫面
    			});
    		});
    </script>
	</body>
</html>

